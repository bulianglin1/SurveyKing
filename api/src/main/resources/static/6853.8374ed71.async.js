(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[6853],{80341:function(){},56853:function(ie,F,o){"use strict";o.r(F),o.d(F,{default:function(){return re}});var x=o(94657),j=o(42277),m=o(67294),$=o(11849),S=o(39428),A=o(83279),c=o(3182),L=o(54029),Y=o(79166),fe=o(402),k=o(20294),q=o(3980),_=o(27484),H=o.n(_),f=o(85893),ee=k.Z.Text,te=function(R){var B=R.itemKey,w=R.mode,r=R.type,e=(0,m.useState)([]),s=(0,x.Z)(e,2),t=s[0],a=s[1],d=(0,m.useRef)({current:1,pageSize:10}),y=function(n){var v=n.status;return w==="exam"&&r==="history"?(0,f.jsxs)("div",{style:{textAlign:"right"},children:[(0,f.jsx)(ee,{type:"danger",strong:!0,style:{fontSize:18,marginRight:5},children:n.examTotal}),(0,f.jsx)("span",{style:{fontSize:12},children:"\u5206"}),(0,f.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:H()(n.endTime).format("YYYY-MM-DD HH:mm")})]}):w==="survey"&&r==="history"?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:H()(n.endTime).format("YYYY-MM-DD HH:mm")})}):v===0?(0,f.jsx)(Y.Z,{status:"default",text:"\u672A\u5F00\u59CB"}):v===1?(0,f.jsx)(Y.Z,{status:"processing",text:"\u8FDB\u884C\u4E2D"}):(0,f.jsx)(Y.Z,{status:"success",text:"\u5DF2\u5B8C\u6210"})};function g(i){return h.apply(this,arguments)}function h(){return h=(0,c.Z)((0,S.Z)().mark(function i(n){var v,l,u,b,z,E;return(0,S.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return N&&!n&&t.length>0&&(d.current.current=d.current.current+1),T.next=3,q.hi.getWithPagination(r==="todo"?"/api/listUserTask":"/api/listHistoryTask",(0,$.Z)((0,$.Z)({},d.current),{},{type:w,current:n||d.current.current}));case 3:return v=T.sent,l=d.current,u=l.pageSize,b=u===void 0?10:u,z=l.total,E=z===void 0?0:z,n||(d.current=(0,$.Z)((0,$.Z)({},d.current),{},{total:v.total}),D(E/b>d.current.current)),T.abrupt("return",v.list);case 7:case"end":return T.stop()}},i)})),h.apply(this,arguments)}var p=(0,m.useState)(!0),P=(0,x.Z)(p,2),N=P[0],D=P[1],O=function(){var i=(0,c.Z)((0,S.Z)().mark(function n(){var v;return(0,S.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,g();case 2:v=u.sent,a([].concat((0,A.Z)(t),(0,A.Z)(v)));case 4:case"end":return u.stop()}},n)}));return function(){return i.apply(this,arguments)}}(),C=function(n){var v=new Date().getTime(),l=[];return r==="history"&&(w==="exam"?l.push({key:"start",text:"\u67E5\u770B\u7ED3\u679C",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId,"/exam-result/").concat(n.answerId))}}):l.push({key:"start",text:"\u67E5\u770B\u7B54\u6848",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId,"/").concat(n.answerId,"?pattern=readPretty"))}})),r=="todo"&&(w==="exam"?n.examStartTime&&n.examStartTime>v?l.push({key:"start",text:"\u8003\u8BD5\u672A\u5F00\u59CB",danger:!0,primary:!0}):n.examEndTime&&v>n.examEndTime?n.status===2?l.push({key:"result",text:"\u67E5\u770B\u7ED3\u679C",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId,"/exam-result/").concat(n.answerId))}}):l.push({key:"result",text:"\u8003\u8BD5\u5DF2\u7ED3\u675F",primary:!0}):(n.status===1||n.status===0)&&l.push({key:"start",text:"\u5F00\u59CB\u8003\u8BD5",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId))}}):n.endTime&&v>n.endTime?l.push({key:"start",text:"\u95EE\u5377\u5DF2\u7ED3\u675F",danger:!0}):l.push({key:"start",text:"\u5F00\u59CB\u7B54\u5377",primary:!0,onClick:function(){window.open("/s/".concat(n.projectId))}})),l.push({key:"cancel",text:"\u53D6\u6D88"}),l};return(0,f.jsx)("div",{style:{height:"100vh",overflowY:"scroll"},children:(0,f.jsxs)(j.t8,{onRefresh:(0,c.Z)((0,S.Z)().mark(function i(){var n;return(0,S.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,g(1);case 2:n=l.sent,a([].concat((0,A.Z)(n),(0,A.Z)(t.filter(function(u){return!n.map(function(b){return b.projectId}).includes(u.projectId)}))));case 4:case"end":return l.stop()}},i)})),children:[(0,f.jsx)(j.aV,{children:t.map(function(i,n){return(0,f.jsx)(j.aV.Item,{onClick:function(){j.u_.show({content:i.name,closeOnAction:!0,actions:C(i)})},extra:y(i),description:i.examStartTime?H()(i.examStartTime).format("YYYY-MM-DD HH:mm"):void 0,children:i.name},n)})}),(0,f.jsx)(j.v_,{loadMore:O,hasMore:N})]},B)})},ne=te;function re(){var G=(0,m.useRef)(null),R=[{key:"survey",title:"\u6211\u7684\u95EE\u5377",type:"todo",mode:"survey"},{key:"exam",title:"\u6211\u7684\u8003\u8BD5",type:"todo",mode:"exam"},{key:"surveyHistory",title:"\u95EE\u5377\u8BB0\u5F55",type:"history",mode:"survey"},{key:"examHistory",title:"\u8003\u8BD5\u8BB0\u5F55",type:"history",mode:"exam"}],B=(0,m.useState)(0),w=(0,x.Z)(B,2),r=w[0],e=w[1];return(0,f.jsxs)("div",{className:"mobile-home",children:[(0,f.jsx)(j.mQ,{activeKey:R[r].key,onChange:function(t){var a,d=R.findIndex(function(y){return y.key===t});e(d),(a=G.current)===null||a===void 0||a.swipeTo(d)},children:R.map(function(s){return(0,f.jsx)(j.mQ.Tab,{title:s.title},s.key)})}),(0,f.jsx)(j.tq,{direction:"horizontal",loop:!0,indicator:function(){return null},ref:G,defaultIndex:r,onIndexChange:function(t){e(t)},children:R.map(function(s){return(0,f.jsx)(j.tq.Item,{children:(0,f.jsx)("div",{className:"survey",children:(0,f.jsx)(ne,{mode:s.mode,type:s.type})})})})})]})}},79166:function(ie,F,o){"use strict";o.d(F,{Z:function(){return w}});var x=o(96156),j=o(90484),m=o(22122),$=o(36228),S=o.n($),A=o(63441),c=o(67294),L=o(53124),Y=o(96159),fe=o(98787);function k(r){return fe.Y.indexOf(r)!==-1}var q=function(e){var s,t=e.className,a=e.prefixCls,d=e.style,y=e.color,g=e.children,h=e.text,p=e.placement,P=p===void 0?"end":p,N=c.useContext(L.E_),D=N.getPrefixCls,O=N.direction,C=D("ribbon",a),i=k(y),n=S()(C,"".concat(C,"-placement-").concat(P),(s={},(0,x.Z)(s,"".concat(C,"-rtl"),O==="rtl"),(0,x.Z)(s,"".concat(C,"-color-").concat(y),i),s),t),v={},l={};return y&&!i&&(v.background=y,l.color=y),c.createElement("div",{className:"".concat(C,"-wrapper")},g,c.createElement("div",{className:n,style:(0,m.Z)((0,m.Z)({},v),d)},c.createElement("span",{className:"".concat(C,"-text")},h),c.createElement("div",{className:"".concat(C,"-corner"),style:l})))},_=q,H=o(28481);function f(r){var e=r.prefixCls,s=r.value,t=r.current,a=r.offset,d=a===void 0?0:a,y;return d&&(y={position:"absolute",top:"".concat(d,"00%"),left:0}),c.createElement("span",{style:y,className:S()("".concat(e,"-only-unit"),{current:t})},s)}function ee(r,e,s){for(var t=r,a=0;(t+10)%10!==e;)t+=s,a+=s;return a}function te(r){var e=r.prefixCls,s=r.count,t=r.value,a=Number(t),d=Math.abs(s),y=c.useState(a),g=(0,H.Z)(y,2),h=g[0],p=g[1],P=c.useState(d),N=(0,H.Z)(P,2),D=N[0],O=N[1],C=function(){p(a),O(d)};c.useEffect(function(){var E=setTimeout(function(){C()},1e3);return function(){clearTimeout(E)}},[a]);var i,n;if(h===a||Number.isNaN(a)||Number.isNaN(h))i=[c.createElement(f,(0,m.Z)({},r,{key:a,current:!0}))],n={transition:"none"};else{i=[];for(var v=a+10,l=[],u=a;u<=v;u+=1)l.push(u);var b=l.findIndex(function(E){return E%10===h});i=l.map(function(E,K){var T=E%10;return c.createElement(f,(0,m.Z)({},r,{key:E,value:T,offset:K-b,current:K===b}))});var z=D<d?1:-1;n={transform:"translateY(".concat(-ee(h,a,z),"00%)")}}return c.createElement("span",{className:"".concat(e,"-only"),style:n,onTransitionEnd:C},i)}var ne=function(r,e){var s={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(s[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(r);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(r,t[a])&&(s[t[a]]=r[t[a]]);return s},re=function(e){var s=e.prefixCls,t=e.count,a=e.className,d=e.motionClassName,y=e.style,g=e.title,h=e.show,p=e.component,P=p===void 0?"sup":p,N=e.children,D=ne(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),O=c.useContext(L.E_),C=O.getPrefixCls,i=C("scroll-number",s),n=(0,m.Z)((0,m.Z)({},D),{"data-show":h,style:y,className:S()(i,a,d),title:g}),v=t;if(t&&Number(t)%1==0){var l=String(t).split("");v=l.map(function(u,b){return c.createElement(te,{prefixCls:i,count:Number(t),value:u,key:l.length-b})})}return y&&y.borderColor&&(n.style=(0,m.Z)((0,m.Z)({},y),{boxShadow:"0 0 0 1px ".concat(y.borderColor," inset")})),N?(0,Y.Tm)(N,function(u){return{className:S()("".concat(i,"-custom-component"),u==null?void 0:u.className,d)}}):c.createElement(P,n,v)},G=re,R=function(r,e){var s={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(s[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(r);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(r,t[a])&&(s[t[a]]=r[t[a]]);return s},B=function(e){var s,t,a=e.prefixCls,d=e.scrollNumberPrefixCls,y=e.children,g=e.status,h=e.text,p=e.color,P=e.count,N=P===void 0?null:P,D=e.overflowCount,O=D===void 0?99:D,C=e.dot,i=C===void 0?!1:C,n=e.size,v=n===void 0?"default":n,l=e.title,u=e.offset,b=e.style,z=e.className,E=e.showZero,K=E===void 0?!1:E,T=R(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),de=c.useContext(L.E_),ve=de.getPrefixCls,ae=de.direction,Z=ve("badge",a),se=N>O?"".concat(O,"+"):N,oe=g!=null||p!=null,le=se==="0"||se===0,Q=i&&!le,U=Q?"":se,V=(0,c.useMemo)(function(){var I=U==null||U==="";return(I||le&&!K)&&!Q},[U,le,K,Q]),me=(0,c.useRef)(N);V||(me.current=N);var W=me.current,ye=(0,c.useRef)(U);V||(ye.current=U);var ce=ye.current,pe=(0,c.useRef)(Q);V||(pe.current=Q);var J=(0,c.useMemo)(function(){if(!u)return(0,m.Z)({},b);var I={marginTop:u[1]};return ae==="rtl"?I.left=parseInt(u[0],10):I.right=-parseInt(u[0],10),(0,m.Z)((0,m.Z)({},I),b)},[ae,u,b]),Ce=l!=null?l:typeof W=="string"||typeof W=="number"?W:void 0,ge=V||!h?null:c.createElement("span",{className:"".concat(Z,"-status-text")},h),Ne=!W||(0,j.Z)(W)!=="object"?void 0:(0,Y.Tm)(W,function(I){return{style:(0,m.Z)((0,m.Z)({},J),I.style)}}),Ze=S()((s={},(0,x.Z)(s,"".concat(Z,"-status-dot"),oe),(0,x.Z)(s,"".concat(Z,"-status-").concat(g),!!g),(0,x.Z)(s,"".concat(Z,"-status-").concat(p),k(p)),s)),xe={};p&&!k(p)&&(xe.background=p);var he=S()(Z,(t={},(0,x.Z)(t,"".concat(Z,"-status"),oe),(0,x.Z)(t,"".concat(Z,"-not-a-wrapper"),!y),(0,x.Z)(t,"".concat(Z,"-rtl"),ae==="rtl"),t),z);if(!y&&oe){var Se=J.color;return c.createElement("span",(0,m.Z)({},T,{className:he,style:J}),c.createElement("span",{className:Ze,style:xe}),h&&c.createElement("span",{style:{color:Se},className:"".concat(Z,"-status-text")},h))}return c.createElement("span",(0,m.Z)({},T,{className:he}),y,c.createElement(A.default,{visible:!V,motionName:"".concat(Z,"-zoom"),motionAppear:!1,motionDeadline:1e3},function(I){var M,be=I.className,Ee=ve("scroll-number",d),ue=pe.current,je=S()((M={},(0,x.Z)(M,"".concat(Z,"-dot"),ue),(0,x.Z)(M,"".concat(Z,"-count"),!ue),(0,x.Z)(M,"".concat(Z,"-count-sm"),v==="small"),(0,x.Z)(M,"".concat(Z,"-multiple-words"),!ue&&ce&&ce.toString().length>1),(0,x.Z)(M,"".concat(Z,"-status-").concat(g),!!g),(0,x.Z)(M,"".concat(Z,"-status-").concat(p),k(p)),M)),X=(0,m.Z)({},J);return p&&!k(p)&&(X=X||{},X.background=p),c.createElement(G,{prefixCls:Ee,show:!V,motionClassName:be,className:je,count:ce,title:Ce,style:X,key:"scrollNumber"},Ne)}),ge)};B.Ribbon=_;var w=B},54029:function(ie,F,o){"use strict";var x=o(38663),j=o.n(x),m=o(80341),$=o.n(m)}}]);
