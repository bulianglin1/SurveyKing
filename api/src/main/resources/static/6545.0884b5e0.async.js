(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[6545],{90858:function(N,v,n){"use strict";n.r(v);var F=n(71194),g=n(50146),z=n(54421),f=n(38272),$=n(49111),P=n(19650),G=n(57663),o=n(71577),H=n(12968),D=n(62462),j=n(83279),d=n(94657),x=n(3980),I=n(21444),U=n(38296),A=n(54549),T=n(94184),y=n.n(T),i=n(67294),W=n(5058),B=n.n(W),e=n(85893);function r(O){return O.match(/.(jpg|jpeg|png|gif)$/i)}var K=function(L){var u=L.value,R=(0,i.useState)(),M=(0,d.Z)(R,2),l=M[0],p=M[1];(0,i.useEffect)(function(){if(u){var _=Object.values(u).reduce(function(t,c){return t.push.apply(t,(0,j.Z)(c)),t},[]);x.hi.loadFiles({ids:_}).then(function(t){p(t)})}},[u]);var Z=(0,i.useState)(),m=(0,d.Z)(Z,2),s=m[0],E=m[1],S=(0,i.useState)(!1),C=(0,d.Z)(S,2),a=C[0],h=C[1];return(0,e.jsxs)("div",{className:"preview",children:[(0,e.jsx)("div",{style:{flexDirection:"row",flexWrap:"wrap",display:"flex"},children:(0,e.jsx)(D.Z.PreviewGroup,{children:l==null?void 0:l.filter(function(_){return r(_.originalName)}).map(function(_){return(0,e.jsx)(D.Z,{width:185,src:"/api/file?id=".concat(_.id),alt:_.originalName,height:140},_.id)})})}),(l==null?void 0:l.filter(function(_){return!r(_.originalName)}).length)>0&&(0,e.jsx)(f.ZP,{size:"small",bordered:!0,dataSource:l==null?void 0:l.filter(function(_){return!r(_.originalName)}),renderItem:function(t){return(0,e.jsx)(f.ZP.Item,{children:(0,e.jsxs)(P.Z,{children:[(0,e.jsx)("a",{onClick:function(){return window.open("/api/file?id=".concat(t.id))},children:t.originalName}),(0,e.jsx)(o.Z,{type:"link",size:"small",onClick:function(){return E(t)},children:"\u9884\u89C8"})]})},t.id)}}),s&&(0,e.jsx)(g.Z,{open:!0,footer:!1,title:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,e.jsxs)("span",{children:["`\u9884\u89C8 $",s==null?void 0:s.originalName]}),(0,e.jsxs)(P.Z,{children:[(0,e.jsx)(o.Z,{type:"text",icon:a?(0,e.jsx)(I.Z,{}):(0,e.jsx)(U.Z,{}),onClick:function(){h(!a)}}),(0,e.jsx)(o.Z,{onClick:function(){return E(void 0)},type:"text",icon:(0,e.jsx)(A.Z,{})})]})]}),width:1e3,onCancel:function(){return E(void 0)},bodyStyle:{height:a?"calc(100vh - 100px)":600},className:y()("upload-preview",{"full-screen":a}),closable:!1,children:(0,e.jsx)(B(),{fileType:s==null?void 0:s.originalName.split(".").pop(),filePath:"/api/file?id=".concat(s==null?void 0:s.id),errorComponent:(0,e.jsx)("div",{children:s==null?void 0:s.originalName}),onError:function(){}})})]})};v.default=K}}]);
