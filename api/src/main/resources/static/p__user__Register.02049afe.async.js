(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[3717],{95101:function(v){v.exports={container:"container___3u4qc",lang:"lang___3VyRW",content:"content___1k5Ro",top:"top___1x2PK",header:"header___3Kw-q",logo:"logo___2aK9c",title:"title___1Izp8",desc:"desc___vFX8U",main:"main___19HXK",icon:"icon___14_b2",other:"other____-JZS",register:"register___3QsXc",prefixIcon:"prefixIcon___2x9jr"}},3178:function(){},29791:function(v,E,e){"use strict";var t=e(27400),O=e(87859),h=e(85893);E.Z=function(){var g,m,j=(0,t.a)(),P=j.system,c=(g=P.setting)===null||g===void 0?void 0:g.copyright,o=[];if((m=P.setting)!==null&&m!==void 0&&m.recordNum){var n;o.push({key:"recordNumber",title:(n=P.setting)===null||n===void 0?void 0:n.recordNum,href:"https://beian.miit.gov.cn/",blankTarget:!0})}return(0,h.jsx)(O.qc,{copyright:c||!1,links:o})}},29552:function(v,E,e){"use strict";e.r(E);var t=e(39428),O=e(34792),h=e(48086),g=e(3182),m=e(94657),j=e(17462),P=e(76772),c=e(67294),o=e(82837),n=e(42285),R=e(73727),W=e(29791),b=e(95101),d=e.n(b),Z=e(27400),F=e(80582),S=e(5481),N=e.n(S),z=e(3980),s=e(85893),w=function(B){var p=B.content;return(0,s.jsx)(P.Z,{style:{marginBottom:24},message:p,type:"error",showIcon:!0})},V=function(){var B=(0,c.useState)(!1),p=(0,m.Z)(B,2),x=p[0],A=p[1],H=(0,c.useState)(),I=(0,m.Z)(H,2),U=I[0],X=I[1],y=(0,Z.a)(),_=y.system,k=(0,c.useState)(""),T=(0,m.Z)(k,2),K=T[0],G=T[1],J=(0,c.useState)([]),L=(0,m.Z)(J,2),D=L[0],Q=L[1],C=(0,n.YB)(),Y=function(){var a=(0,g.Z)((0,t.Z)().mark(function u(l){var f;return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,D.length===1&&(l.role=D[0].id),r.next=4,y.register(l);case 4:if(f=r.sent,!f.success){r.next=9;break}return h.default.success("\u6CE8\u518C\u6210\u529F"),n.m8.push("/user/login"),r.abrupt("return");case 9:X(f.message),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),h.default.error("\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 15:A(!1);case 16:case"end":return r.stop()}},u,null,[[0,12]])}));return function(l){return a.apply(this,arguments)}}();return(0,c.useEffect)(function(){z.hi.getRegisterRoles().then(function(a){a&&Q(a)})},[]),(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)("div",{className:d().lang,"data-lang":!0,children:n.pD&&(0,s.jsx)(n.pD,{})}),(0,s.jsxs)("div",{className:d().content,children:[(0,s.jsxs)("div",{className:d().top,children:[(0,s.jsx)("div",{className:d().header,children:(0,s.jsxs)(R.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:d().logo,src:_.avatar?"/api/public/preview/".concat(_==null?void 0:_.avatar):N()}),(0,s.jsx)("span",{className:d().title,children:_==null?void 0:_.name})]})}),(0,s.jsx)("div",{className:d().desc,children:_==null?void 0:_.description})]}),(0,s.jsx)("div",{className:d().main,children:(0,s.jsxs)(o.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:C.formatMessage({id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C"})},render:function(u,l){return l.pop()},submitButtonProps:{loading:x,size:"large",style:{width:"100%"},htmlType:"submit"}},onFinish:function(){var a=(0,g.Z)((0,t.Z)().mark(function u(l){return(0,t.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!x){i.next=2;break}return i.abrupt("return");case 2:return A(!0),i.next=5,Y(l);case 5:case"end":return i.stop()}},u)}));return function(u){return a.apply(this,arguments)}}(),children:[U&&(0,s.jsx)(w,{content:U}),(0,s.jsx)(o.V,{label:"\u59D3\u540D",name:"name",fieldProps:{size:"large"},placeholder:C.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:(0,s.jsx)(n._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u59D3\u540D!"})}]}),(0,s.jsx)(o.V,{label:"\u767B\u5F55\u8D26\u53F7",name:"username",fieldProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7",rules:[{required:!0,message:"\u767B\u5F55\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,s.jsx)(o.V.Password,{label:"\u5BC6\u7801",name:"password",fieldProps:{size:"large",onChange:function(u){G(u.target.value)}},placeholder:C.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(n._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})},{pattern:_.registerInfo.strongPasswordEnabled?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,16}$/:/.{6,}/,message:_.registerInfo.strongPasswordEnabled?"8-16\u4F4D\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57,\u4E0D\u80FD\u4F7F\u7528\u7279\u6B8A\u5B57\u7B26":"\u5BC6\u7801\u81F3\u5C116\u4F4D"}]}),(0,s.jsx)(o.V.Password,{name:"rePassword",label:"\u5BC6\u7801\u786E\u8BA4",fieldProps:{size:"large"},placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:function(){var a=(0,g.Z)((0,t.Z)().mark(function l(f,i){return(0,t.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(i&&K&&i!==K)){M.next=2;break}throw new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4!");case 2:case"end":return M.stop()}},l)}));function u(l,f){return a.apply(this,arguments)}return u}()}]}),D.length>1&&(0,s.jsx)(o._I,{name:"role",label:"\u9009\u62E9\u89D2\u8272",fieldProps:{size:"large"},options:D.map(function(a){return{label:a.name,value:a.id}}),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]}),(0,s.jsx)("div",{style:{marginBottom:24,display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(R.rU,{to:"/user/login",children:"\u8FD4\u56DE\u767B\u5F55"})})]})})]}),(0,s.jsx)(W.Z,{})]})};E.default=(0,F.Pi)(V)},5481:function(v,E,e){v.exports=e.p+"static/logo.eaa834e3.svg"},17462:function(v,E,e){"use strict";var t=e(38663),O=e.n(t),h=e(3178),g=e.n(h)}}]);
