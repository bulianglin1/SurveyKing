(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[9999],{38006:function(A){A.exports={linkGroup:"linkGroup___9Jgdb"}},9016:function(A){A.exports={activitiesList:"activitiesList___H8HBB",username:"username___2ciPn",event:"event___3yvwe",pageHeaderContent:"pageHeaderContent___PWSiu",avatar:"avatar___3ZBop",content:"content___1eLtZ",contentTitle:"contentTitle___Yu-cR",extraContent:"extraContent___3rMo7",statItem:"statItem___2hHyE",members:"members___1FE9G",member:"member___2ERhZ",projectList:"projectList___2xaJs",cardTitle:"cardTitle___Bli-X",projectGrid:"projectGrid___Bia9a",projectItemContent:"projectItemContent___3_r0i",datetime:"datetime___2UCoC",activeCard:"activeCard___10qJg",container:"container___1D3Yy"}},60438:function(A,G,t){"use strict";t.r(G),t.d(G,{default:function(){return me}});var f=t(13062),b=t(71230),le=t(89032),B=t(15746),ye=t(58024),s=t(91894),J=t(54421),L=t(38272),se=t(94657),he=t(95300),V=t(7277),ge=t(94233),H=t(51890),Ce=t(71748),ie=t(90860),X=t(67294),Q=t(27400),oe=t(87859),de=t(9761),ce=t(30381),Y=t.n(ce),ve=t(73727),a=t(57663),i=t(71577),o=t(49101),n=t(38006),l=t.n(n),e=t(85893),E=function(d){var r=d.links,x=d.linkElement,c=d.onAdd;return(0,e.jsxs)("div",{className:l().linkGroup,children:[r.map(function(m){return(0,X.createElement)(x,{key:"linkGroup-item-".concat(m.id||m.title),to:m.href,href:m.href},m.title)}),(0,e.jsxs)(i.Z,{size:"small",type:"primary",ghost:!0,onClick:c,children:[(0,e.jsx)(o.Z,{})," \u6DFB\u52A0"]})]})};E.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var Z=E,p=t(9016),u=t.n(p),C=t(18106),K=t(60561),P=t(39428),I=t(3182),R=t(402),F=t(20294),k=t(3980),U=t(91186),w=t(27484),M=t.n(w),q=F.Z.Text,z=function(d){var r=d.mode,x=d.type,c=[{title:r==="exam"?"\u8003\u8BD5\u540D\u79F0":"\u95EE\u5377\u540D\u79F0",dataIndex:"name"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"examStartTime",hideInTable:x==="history",renderText:function(y){return y?M()(y).format("YYYY-MM-DD HH:mm"):"-"}},{title:"\u5B8C\u6210\u72B6\u6001",dataIndex:"status",valueType:"select",hideInTable:x==="history",valueEnum:{0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u8FDB\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u5B8C\u6210",status:"Success"}}},{title:"\u6211\u7684\u7B54\u9898\u65F6\u95F4",dataIndex:"answerTime",hideInTable:x!=="history",renderText:function(y,v){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{fontSize:12},children:M()(v.startTime).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:M()(v.endTime).format("YYYY-MM-DD HH:mm:ss")})]})}},{title:"\u6211\u7684\u7B54\u9898\u7528\u65F6",dataIndex:"totalTime",hideInTable:x!=="history",renderText:function(y,v){if(v.endTime&&v.startTime)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q,{strong:!0,style:{fontSize:18,marginRight:5},children:Math.floor((v.endTime-v.startTime)/6e4)}),(0,e.jsx)("span",{style:{fontSize:12},children:"\u5206\u949F"})]})}},{title:"\u6211\u7684\u5F97\u5206",dataIndex:"examScore",hideInTable:!(r==="exam"&&x==="history"),renderText:function(y){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q,{type:"danger",strong:!0,style:{fontSize:18,marginRight:5},children:y}),(0,e.jsx)("span",{style:{fontSize:12},children:"\u5206"})]})}},{title:"\u64CD\u4F5C",dataIndex:"operate",renderText:function(y,v){return v.answerId&&r==="exam"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId,"/exam-result/").concat(v.answerId))},children:"\u67E5\u770B\u7ED3\u679C"}):v.answerId&&r==="survey"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId,"/").concat(v.answerId,"?pattern=readPretty"))},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(v.projectId))},children:"\u8DF3\u8F6C"})}}];return(0,e.jsx)(U.ZP,{rowKey:"id",params:{type:r},request:function(){var m=(0,I.Z)((0,P.Z)().mark(function y(v){return(0,P.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",x==="todo"?k.hi.listUserTask(v):k.hi.listHistoryTask(v));case 1:case"end":return j.stop()}},y)}));return function(y){return m.apply(this,arguments)}}(),bordered:!0,columns:c,search:!1,toolbar:{}})};function _(){var g=[{key:"exam",label:"\u6211\u7684\u8003\u8BD5",children:(0,e.jsx)(z,{type:"todo",mode:"exam"})},{key:"survey",label:"\u6211\u7684\u95EE\u5377",children:(0,e.jsx)(z,{type:"todo",mode:"survey"})},{key:"surveyHistory",label:"\u95EE\u5377\u8BB0\u5F55",children:(0,e.jsx)(z,{type:"history",mode:"survey"})},{key:"examHistory",label:"\u8003\u8BD5\u8BB0\u5F55",children:(0,e.jsx)(z,{type:"history",mode:"exam"})}];return(0,e.jsx)(s.Z,{style:{width:"100%",marginBottom:24},children:(0,e.jsx)(K.Z,{items:g})})}var ee=[{title:"\u521B\u5EFA\u95EE\u5377",href:"/survey/new?mode=survey"},{title:"\u521B\u5EFA\u8003\u8BD5",href:"/survey/new?mode=exam"}];function $(){var g=new Date,d=g.getHours();return d<6?"\u51CC\u6668\u597D":d<9?"\u65E9\u4E0A\u597D":d<12?"\u4E0A\u5348\u597D":d<14?"\u4E2D\u5348\u597D":d<17?"\u4E0B\u5348\u597D":d<19?"\u508D\u665A\u597D":d<22?"\u665A\u4E0A\u597D":"\u591C\u91CC\u597D"}var O=function(d){var r=d.currentUser,x=r&&Object.keys(r).length;return x?(0,e.jsxs)("div",{className:u().pageHeaderContent,children:[(0,e.jsx)("div",{className:u().avatar,children:(0,e.jsx)(H.C,{size:"large",src:r.avatar})}),(0,e.jsxs)("div",{className:u().content,children:[(0,e.jsxs)("div",{className:u().contentTitle,children:[$(),"\uFF0C",r.name,"\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"]}),(0,e.jsx)("div",{children:r.group})]}),(0,e.jsx)(te,{})]}):(0,e.jsx)(ie.Z,{avatar:!0,paragraph:{rows:1},active:!0})},te=function(){var d=(0,Q.a)(),r=d.userOverview;return(0,e.jsxs)("div",{className:u().extraContent,children:[(0,e.jsx)("div",{className:u().statItem,children:(0,e.jsx)(V.Z,{title:"\u95EE\u5377\u6570",value:r==null?void 0:r.surveyCount})}),(0,e.jsx)("div",{className:u().statItem,children:(0,e.jsx)(V.Z,{title:"\u8003\u8BD5\u6570",value:r==null?void 0:r.examCount})})]})},ae=void 0==="1",ue=function(){var d=(0,Q.a)(),r=d.user,x=(0,X.useState)(function(){return!localStorage.getItem("welcome")}),c=(0,se.Z)(x,2),m=c[0],y=c[1],v={},T=v.loading,j=v.data,fe=j===void 0?[]:j,xe=function(h){var re=h.template.split(/@\{([^{}]*)\}/gi).map(function(S){return h[S]?(0,e.jsx)("a",{href:h[S].link,children:h[S].name},h[S].name):S});return(0,e.jsx)(L.ZP.Item,{children:(0,e.jsx)(L.ZP.Item.Meta,{avatar:(0,e.jsx)(H.C,{src:h.user.avatar}),title:(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{className:u().username,children:h.user.name}),"\xA0",(0,e.jsx)("span",{className:u().event,children:re})]}),description:(0,e.jsx)("span",{className:u().datetime,title:h.updatedAt,children:Y()(h.updatedAt).fromNow()})})},h.id)};return(0,e.jsx)(oe._z,{className:u().container,content:(0,e.jsx)(O,{currentUser:{avatar:"/api/public/preview/".concat(r==null?void 0:r.avatar),name:r==null?void 0:r.name,userid:r==null?void 0:r.userId,email:r==null?void 0:r.email,signature:r==null?void 0:r.profile,group:r==null?void 0:r.deptName}}),children:(0,e.jsxs)(b.Z,{gutter:24,children:[(0,e.jsxs)(B.Z,{xl:16,lg:24,md:24,sm:24,xs:24,children:[(0,e.jsx)(_,{}),ae&&(0,e.jsx)(s.Z,{bodyStyle:{padding:0},bordered:!1,className:u().activeCard,title:"\u52A8\u6001",loading:T,children:(0,e.jsx)(L.ZP,{loading:T,renderItem:function(h){return xe(h)},dataSource:fe,className:u().activitiesList,size:"large"})})]}),d.hasPermission("project:create")&&(0,e.jsx)(B.Z,{xl:8,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(s.Z,{style:{marginBottom:24},title:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A",bordered:!1,bodyStyle:{padding:0},children:(0,e.jsx)(Z,{onAdd:function(){},links:ee,linkElement:ve.rU})})})]})})},me=(0,de.Pi)(ue)},91894:function(A,G,t){"use strict";t.d(G,{Z:function(){return ve}});var f=t(96156),b=t(22122),le=t(36228),B=t.n(le),ye=t(98423),s=t(67294),J=t(53124),L=t(97647),se=t(90860),he=t(60561),V=function(a,i){var o={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&i.indexOf(n)<0&&(o[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(a);l<n.length;l++)i.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(a,n[l])&&(o[n[l]]=a[n[l]]);return o},ge=function(i){var o=i.prefixCls,n=i.className,l=i.hoverable,e=l===void 0?!0:l,E=V(i,["prefixCls","className","hoverable"]);return s.createElement(J.C,null,function(Z){var p=Z.getPrefixCls,u=p("card",o),C=B()("".concat(u,"-grid"),n,(0,f.Z)({},"".concat(u,"-grid-hoverable"),e));return s.createElement("div",(0,b.Z)({},E,{className:C}))})},H=ge,Ce=function(a,i){var o={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&i.indexOf(n)<0&&(o[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(a);l<n.length;l++)i.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(a,n[l])&&(o[n[l]]=a[n[l]]);return o};function ie(a){var i=a.map(function(o,n){return s.createElement("li",{style:{width:"".concat(100/a.length,"%")},key:"action-".concat(n)},s.createElement("span",null,o))});return i}var X=s.forwardRef(function(a,i){var o,n,l=s.useContext(J.E_),e=l.getPrefixCls,E=l.direction,Z=s.useContext(L.Z),p=function(N){var D;(D=a.onTabChange)===null||D===void 0||D.call(a,N)},u=function(){var N;return s.Children.forEach(a.children,function(D){D&&D.type&&D.type===H&&(N=!0)}),N},C=a.prefixCls,K=a.className,P=a.extra,I=a.headStyle,R=I===void 0?{}:I,F=a.bodyStyle,k=F===void 0?{}:F,U=a.title,w=a.loading,M=a.bordered,q=M===void 0?!0:M,z=a.size,_=a.type,ee=a.cover,$=a.actions,O=a.tabList,te=a.children,ae=a.activeTabKey,ue=a.defaultActiveTabKey,me=a.tabBarExtraContent,g=a.hoverable,d=a.tabProps,r=d===void 0?{}:d,x=Ce(a,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),c=e("card",C),m=s.createElement(se.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},te),y=ae!==void 0,v=(0,b.Z)((0,b.Z)({},r),(o={},(0,f.Z)(o,y?"activeKey":"defaultActiveKey",y?ae:ue),(0,f.Z)(o,"tabBarExtraContent",me),o)),T,j=O&&O.length?s.createElement(he.Z,(0,b.Z)({size:"large"},v,{className:"".concat(c,"-head-tabs"),onChange:p,items:O.map(function(W){var N;return{label:W.tab,key:W.key,disabled:(N=W.disabled)!==null&&N!==void 0?N:!1}})})):null;(U||P||j)&&(T=s.createElement("div",{className:"".concat(c,"-head"),style:R},s.createElement("div",{className:"".concat(c,"-head-wrapper")},U&&s.createElement("div",{className:"".concat(c,"-head-title")},U),P&&s.createElement("div",{className:"".concat(c,"-extra")},P)),j));var fe=ee?s.createElement("div",{className:"".concat(c,"-cover")},ee):null,xe=s.createElement("div",{className:"".concat(c,"-body"),style:k},w?m:te),ne=$&&$.length?s.createElement("ul",{className:"".concat(c,"-actions")},ie($)):null,h=(0,ye.Z)(x,["onTabChange"]),re=z||Z,S=B()(c,(n={},(0,f.Z)(n,"".concat(c,"-loading"),w),(0,f.Z)(n,"".concat(c,"-bordered"),q),(0,f.Z)(n,"".concat(c,"-hoverable"),g),(0,f.Z)(n,"".concat(c,"-contain-grid"),u()),(0,f.Z)(n,"".concat(c,"-contain-tabs"),O&&O.length),(0,f.Z)(n,"".concat(c,"-").concat(re),re),(0,f.Z)(n,"".concat(c,"-type-").concat(_),!!_),(0,f.Z)(n,"".concat(c,"-rtl"),E==="rtl"),n),K);return s.createElement("div",(0,b.Z)({ref:i},h,{className:S}),T,fe,xe,ne)}),Q=X,oe=function(a,i){var o={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&i.indexOf(n)<0&&(o[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(a);l<n.length;l++)i.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(a,n[l])&&(o[n[l]]=a[n[l]]);return o},de=function(i){return s.createElement(J.C,null,function(o){var n=o.getPrefixCls,l=i.prefixCls,e=i.className,E=i.avatar,Z=i.title,p=i.description,u=oe(i,["prefixCls","className","avatar","title","description"]),C=n("card",l),K=B()("".concat(C,"-meta"),e),P=E?s.createElement("div",{className:"".concat(C,"-meta-avatar")},E):null,I=Z?s.createElement("div",{className:"".concat(C,"-meta-title")},Z):null,R=p?s.createElement("div",{className:"".concat(C,"-meta-description")},p):null,F=I||R?s.createElement("div",{className:"".concat(C,"-meta-detail")},I,R):null;return s.createElement("div",(0,b.Z)({},u,{className:K}),P,F)})},ce=de,Y=Q;Y.Grid=H,Y.Meta=ce;var ve=Y},89032:function(A,G,t){"use strict";var f=t(38663),b=t.n(f),le=t(6999)}}]);
